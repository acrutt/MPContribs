test_name: test tables resource

stages:
    - name: create test contribution
      request:
          url: http://localhost:5000/contributions/
          method: POST
          json:
              id: 5ddc7c0c1e37e6006a663476
              project: test
              identifier: mp-0000
              data:
                temperature:
                  display: 300 K
                  value: 300
                  unit: K
                doping_level:
                  display: 1e+18 cm⁻³
                  value: 1000000000000000000
                  unit: cm⁻³
                formula: CNCl
      response:
          status_code: 200
          body:
              project: test
              identifier: mp-0000

    - name: create test table
      request:
          url: http://localhost:5000/tables/
          method: POST
          json:
              id: 5dddb0af1e37e6000c57eb34
              identifier: mp-0000
              project: test
              name: table_name
              cid: 5ddc7c0c1e37e6006a663476
              columns:
              - T [K]
              - 1e+16 cm⁻³ [μV/K]
              - 1e+17 cm⁻³ [μV/K]
              - 1e+18 cm⁻³ [μV/K]
              - 1e+19 cm⁻³ [μV/K]
              - 1e+20 cm⁻³ [μV/K]
              data:
              - - '100'
                - "-733.286"
                - "-535.075"
                - "-338.206"
                - "-156.799"
                - "-41.4784"
              - - '200'
                - "-823.344"
                - "-625.045"
                - "-427.231"
                - "-234.569"
                - "-80.8270"
              - - '300'
                - "-876.472"
                - "-678.146"
                - "-480.064"
                - "-284.919"
                - "-115.429"
              - - '400'
                - "-916.750"
                - "-718.415"
                - "-520.238"
                - "-324.187"
                - "-148.014"
      response:
          status_code: 200
          body:
              project: test
              identifier: mp-0000
              name: table_name
              cid: 5ddc7c0c1e37e6006a663476

    - name: update contribution with table info
      request:
          url: http://localhost:5000/contributions/5ddc7c0c1e37e6006a663476/
          method: PUT
          json:
              tables:
                  - 5dddb0af1e37e6000c57eb34
      response:
          status_code: 200
          body:
              id: 5ddc7c0c1e37e6006a663476
              project: test
              identifier: mp-0000

    - name: delete test table
      request:
          url: http://localhost:5000/tables/5dddb0af1e37e6000c57eb34/
          method: DELETE
      response:
          status_code: 200

    - name: delete test contribution
      request:
          url: http://localhost:5000/contributions/5ddc7c0c1e37e6006a663476/
          method: DELETE
      response:
          status_code: 200

    - name: single table in DataFrame format
      request:
          url: http://localhost:5000/tables/5cca3512e7004456f9b98867/
          method: GET
          params:
              _fields: _all
              data_per_page: 2
      response:
          status_code: 200
          body:
              id: 5cca3512e7004456f9b98867
              project: carrier_transport
              identifier: mp-27502
              name: S(n)
              cid: 5ac08be3d4f144332ce7b785
              config: null
              columns:
              - T [K]
              - 1e+16 cm⁻³ [μV/K]
              - 1e+17 cm⁻³ [μV/K]
              - 1e+18 cm⁻³ [μV/K]
              - 1e+19 cm⁻³ [μV/K]
              - 1e+20 cm⁻³ [μV/K]
              data:
              - - '100'
                - "-733.286"
                - "-535.075"
                - "-338.206"
                - "-156.799"
                - "-41.4784"
              - - '200'
                - "-823.344"
                - "-625.045"
                - "-427.231"
                - "-234.569"
                - "-80.8270"

    - name: specific table in Backgrid format
      request:
          url: http://localhost:5000/tables/5ac08be3d4f144332ce7b785/S(n)
          method: GET
          params:
              page: 1
              per_page: 2
      response:
          status_code: 200
          body:
              total_count: 13
              total_pages: 6
              page: 1
              last_page: 6
              per_page: 2
              items:
              - T [K]: '100'
                1e+16 cm⁻³ [μV/K]: "-733.286"
                1e+17 cm⁻³ [μV/K]: "-535.075"
                1e+18 cm⁻³ [μV/K]: "-338.206"
                1e+19 cm⁻³ [μV/K]: "-156.799"
                1e+20 cm⁻³ [μV/K]: "-41.4784"
              - T [K]: '200'
                1e+16 cm⁻³ [μV/K]: "-823.344"
                1e+17 cm⁻³ [μV/K]: "-625.045"
                1e+18 cm⁻³ [μV/K]: "-427.231"
                1e+19 cm⁻³ [μV/K]: "-234.569"
                1e+20 cm⁻³ [μV/K]: "-80.8270"

    - name: specific table in Plotly format
      request:
          url: http://localhost:5000/tables/carrier_transport/mp-27502/S(n)
          method: GET
          params:
              page: 1
              per_page: 2
      response:
          status_code: 200
          body:
              x:
              - 1e+16
              - 1e+17
              - 1e+18
              - 1e+19
              - 1e+20
              y:
              - '100'
              - '200'
              z:
              - - "-733.286"
                - "-535.075"
                - "-338.206"
                - "-156.799"
                - "-41.4784"
              - - "-823.344"
                - "-625.045"
                - "-427.231"
                - "-234.569"
                - "-80.8270"
