{% extends "layout.html" %}
{% block body %}
{% if fmt == "archieml" %}
<link href="{{ url_for('static', filename='css/archieml.css') }}" media="screen, projection" rel="stylesheet" type="text/css" />
<script src="{{ url_for('static', filename='js/archieml.js') }}"></script>
<link rel="stylesheet" href="https://rawgit.com/oreillymedia/thebe/master/static/thebe/site.css" type="text/css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.6.0/codemirror.min.css" type="text/css"/>
<script src="https://rawgit.com/oreillymedia/thebe/master/static/main-built.js" type="text/javascript" charset="utf-8"></script>
<script>
$(function(){
  var thebe = new Thebe({
    tmpnb_mode: false,
    url: 'http://localhost:8888/'
  });
});
</script>
<div class="container">
  <pre data-executable='true'>
z = "hello", 4+4
print(z)
  </pre>
</div>
<div class="sandbox">
  <div class="container"><br>
    <div class="row">
      <div class="col-md-6"><strong>edit MPFile contents:</strong></div>
      <div class="col-md-6"><strong>live-preview of JSON representation after default ArchieML parsing:</strong></div>
    </div>
{% if "aml" in content %}
<aml>{{content.aml|safe}}</aml>
{% else %}
<aml>This is an example MPFile in the ArchieML format.

Experiment.Preparation: Sputter deposition

{Experiment.Sample}
Material: Vicalloy
Authors: Contact Alpha T. N'Diaye (atndiaye@lbl.gov)

{Experiment.Measurement}
Detection: total electron yield
Temperature: RT
Orientation: 30° grazing incidence

{Experiment.Measurement.Beamline}
Beamline: ALS-6.3.1
Method: Soft x-ray XAS and XMCD
Monochromator.Exit_Slit: 20µm
Monochromator.Grating: 600l/mm

{Datasource}
directory: Vicalloy/rawdata
group_by: Z Y

{Fe_XMCD}
get_xmcd.energy_range: 690 740
scaling_preedge_to_1.preedge_range: 690 700
linear_background_removal_preedge_XAS.preedge_range: 690 700
xas_normalization_to_min_and_max.energy_range: 690 740
xas_xmcd_minmax:

[+AlNiCoCu.datatable]
Energy,XAS,XMCD
761,0.008445,-0.001452
762,0.007812,-0.000682

[+AlNiCoCu.table2]
Energy,XAS,XMCD
761,0.008445,-0.001452
762,0.007812,-0.000682

:ignore

[.processing]
* scaling background to 1
* constant background removal preedge
* normalization to L3

</aml>
{% endif %}
  </div>
</div>
<script type="text/javascript">
var qs = window.location.search.substring(1);
qs.split('&').forEach(function(term) {
  var temp = term.split('=');
  if (temp[0] == 'aml') {
    var source = decodeURIComponent(temp[1].replace(/\+/g, " "));
    var aml = document.getElementsByTagName('aml')[0];
    aml.innerHTML = source;
  }
});
</script>
<script src="{{ url_for('static', filename='js/sandbox.js') }}"></script>
{% endif %}
{% endblock %}
