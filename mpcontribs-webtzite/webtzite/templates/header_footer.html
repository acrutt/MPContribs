{% load render_entrypoint from webpack_loader %}
<!DOCTYPE html>
<html>
  <head>
    <title>MPContribs Portal</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <input id="api_key" type="hidden" value="{{ request.META.HTTP_X_CONSUMER_CUSTOM_ID }}">
    {% block extra_css %}
    {% endblock extra_css %}
    {% render_entrypoint 'main' %}
  </head>
  <body>
    {% block header %}
    <header hidden>
      {% if show_warning_banner %}
      <nav class="navbar navbar-warning">
        <center class="alert alert-warning">
          <button type="button" class="close" data-dismiss="alert">&times;</button>
          We are currently experiencing issues with the web site and are working to fix the situation.
        </center>
      </nav>
      {% endif %}
      <nav class="navbar navbar-inverse">
        <div class="container">
          <div class="navbar-header">
            <a class="navbar-brand" href="/" style="padding: 6px;">
              <img id="logo">
            </a>
          </div>
          <div class="col-md-4" style="padding-top: 9px; padding-bottom: 9px; margin-left: 30px;">
              <select data-placeholder="Search or jump to projects ..." id="search" style="width: 100%;">
                  <option></option>
              </select>
          </div>
          <ul class="nav navbar-nav navbar-right" style="font-size: 16px; font-weight: bold;">
              <!-- TODO remove ingester domain, merge into portal -->
              <li><a href="/apply" style="color: orange;">Apply</a></li>
              <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                      Contribute <span class="caret"></span>
                  </a>
                  <ul class="dropdown-menu">
                      <li><a href="http://localhost:8000/hub/user-redirect/git-pull?repo=https%3A%2F%2Fgithub.com%2Fmaterialsproject%2FMPContribs&branch=dev&subPath=binder/notebooks/contribute.ipynb&app=notebook ">Jupyter Notebook</a></li> <!-- TODO fix host -->
                      <li><a href="/ingester">Ingester WebApp</a></li>
                  </ul>
              </li>
              <li><a href="http://localhost:8000/hub/user-redirect/git-pull?repo=https%3A%2F%2Fgithub.com%2Fmaterialsproject%2FMPContribs&branch=dev&subPath=binder/notebooks/&app=notebook ">Retrieve</a></li> <!-- TODO fix host -->
              {% block extra_items %}
              {% endblock extra_items %}
              <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                      <span class="glyphicon glyphicon-list" aria-hidden="true"></span> <span class="caret"></span>
                  </a>
                  <ul class="dropdown-menu">
                      <li class="navbar-text" style="float: none; margin: 3px 15px 3px 20px;">
                          <small>Signed in as</small><br><span style="white-space: nowrap;">{{ request.META.HTTP_X_CONSUMER_USERNAME }}</span>
                      </li>
                      <li role="separator" class="divider"></li>
                      <li class="navbar-text" style="float: none; margin: 3px 15px 3px 20px;">
                          <button id=api_key_btn type="button" class="btn btn-default btn-sm">
                              <span class="glyphicon glyphicon-copy" aria-hidden="true"></span> Copy API Key
                          </button>
                      </li>
                      <li role="separator" class="divider"></li>
                      <li>
                          <a href="https://mpcontribs.org" target="_blank">
                              Documentation <span class="glyphicon glyphicon-new-window" aria-hidden="true"></span>
                          </a>
                      </li>
                      <li>
                          <a href="https://api.mpcontribs.org" target="_blank">
                              RESTful API <span class="glyphicon glyphicon-new-window" aria-hidden="true"></span>
                          </a>
                      </li>
                  </ul>
              </li>
          </ul>
        </div>
      </nav>
    </header>
    {% endblock header %}
    {% if alert %}
    <div class="container">
        <div id=alert class="alert alert-warning alert-dismissible" role="alert">
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          {{ alert|safe }}
        </div>
    </div>
    {% else %}
    {% block content %}
    <!-- Page Content-->
    {% endblock content %}
    {% endif %}
    <footer hidden>
      <hr>
      <div class="pad-top row text-center">
        <small>
          Supported by NSF LSDI Data Infrastructure Building Blocks program and
          DOE BES <a href="https://materialsproject.org">Materials Project</a>.
        </small>
      </div>
      {% block footer %}
      {% endblock footer %}
    </footer>
  </body>
</html>
